<!DOCTYPE html>
<html>

<head>
  <meta charset=utf-8 />
  <title>Hyperurbanizing Megaregion</title>
  <meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />

  <link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/7.0.0/normalize.min.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.3.1/leaflet.css" />
  <link href="https://fonts.googleapis.com/css?family=Lora" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Catamaran" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Noto+Sans" rel="stylesheet">

  <style>
		body {
			margin: 0;
			padding: 0;
			background: "whitesmoke";
			font-family: "Noto Sans", sans-serif;
			color: #3d3d3d;
		}

		h1 {
			position: absolute;
			margin-top: 0;
			top: 10px;
			left: 65px;
			font-size: 2em;
			font-family: "Lora", serif;
			letter-spacing: .04em;
			padding: 10px 15px;
			background: rgba(256, 256, 256, .75);
			border: 1px solid grey;
			border-radius: 3px;
			z-index: 800;
		}

		h2 {
			font-family: "Lora", serif;
			letter-spacing: .04em;
		}

		#map {
			position: absolute;
			top: 0;
			bottom: 0;
			width: 100%;
		}

		#about {
			position: absolute;
			bottom: 20px;
			left: 15px;
			width: 280px;
			padding: 0 15px;
			background: rgba(256, 256, 256, .85);
			border: 1px solid grey;
			border-radius: 3px;
			z-index: 800;
		}

		p {
			font-size: .9em;
			line-height: 1.5em;
		}

		a {
			color: #005daa;
			text-decoration: none;
		}

		a:hover {
			text-decoration: underline;
		}
	</style>
</head>

<body>
  <header>
    <section>
      <h1>Our Hyperurbanizing Megaregion</h1>
    </section>
  </header>
  <section>
    <div id='map'></div>
  </section>

  <section id="about">
    <h2>about these Casselberry suburbs</h2>
    <p>Before the 1960's, it was all orange groves, nurseries for ferns, and wetlands. Now when I go home, it seems like it's
      all concrete, asphalt, retention ponds, and parking lots. The entire lot of the house I grew up in eventually became a retention pond to facilitate the
      expansion of a highway. When it was still a backyard, my sister buried her dead hamster "Salmon" there.</p>
    <p>Area Guinness Record: The most parallel bar dips in one minute with a 100 lb pack is 31, and was achieved by Denys Havrikov
      (Ukraine), in
      <a href="http://www.guinnessworldrecords.com/world-records/104417-most-parallel-bar-dips-in-one-minute-with-a-100-lb-pack">Orlando, Florida, USA, on 25 June 2017</a>.</p>
      <ul>
        <li>See my projects on GitHub:
          <a href="https://github.com/JoshuaKnightKY">JoshuaKnightKY</a>
        </li>
        <!-- <li>Visit my <a href='#'>mapping portfolio</a>.</li> -->
      </ul>

    </section>
    <footer>
      <!-- <section>
        <ul>
          <li>See my projects on GitHub:
            <a href="https://github.com/JoshuaKnightKY">JoshuaKnightKY</a>
          </li>
          <li>Visit my <a href='#'>mapping portfolio</a>.</li>
        </ul>
      </section> -->
    </footer>


    <!-- <div class="modal">
      <div class="modal-content">
        <h3>A mall parking lot</h3>
        <img src="http://fscomps.fotosearch.com/compc/GLW/GLW413/gwt172030.jpg" alt="Some parking lot">
      </div>
    </div> -->

    <script src="https://code.jquery.com/jquery-3.1.1.min.js" integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8="
      crossorigin="anonymous"></script>
    <script src="https://unpkg.com/leaflet@1.3.1/dist/leaflet-src.js"></script>
	  <script src="data/route.js"></script>
    <script>
      // map options
      var options = {
        center: [28.6526, -81.3233], // map centered to Wirz Park Pool
        zoom: 15, // adjust to display all locations upon load
        zoomSnap: .1 // allow refined zoom levels
      }

      // create a Leaflet map in our division container with id of 'map'
      var map = L.map('map', options);

      // restrict map to bounds
      map.setMaxBounds(map.getBounds());
      
      // set min and max zoom level
      map.setMinZoom(map.getZoom() - 2);
      map.setMaxZoom(map.getZoom() + 2);

      // request some basemap tiles and add to the map
      var tiles = L.tileLayer(
        'https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}', {
          attribution: 'Tiles &copy; Esri &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community'
        }).addTo(map);



      // create array of objects for each location

      var myLocations = {
        crs: "WGS 84 (EPSG: 4326)",
        author: "Joshua Knight",

        // function to show all names in data
        describeMe: function() {

          // declare variables at top of function
          var myList = "";

          // loop through all features to build list of names
          for (i = 0; i < this.features.length; i++) {
            myList += this.features[i].name + ", ";

            // at the end of the list give a final message
            if (i === this.features.length-1) {
              myList += " are all of the places I have mapped!";
              break;
            }
          };

          return console.log ("Report: " + myList);
      },
      // Locations as array of JS objects
      features: [{
          name: "Pet Cemetary",
          properties: {
            coordinates: [28.647274, -81.317506],
            type: "Animal",
            details: "My sister's dead hamster Salmon was buried here."
          }
        },
        {
          name: "Wirz Park Big Field",
          properties: {
            coordinates: [28.650825, -81.314764],
            type: "Baseball",
            details: "The big field for weekend little league games."
          }
        },
        {
          name: "Hector's House",
          properties: {
            coordinates: [28.651020, -81.317126],
            type: "Residence",
            details: "My best friend in middle school lived here."
          }
        },
        {
          name: "Wirz Park Small Field",
          properties: {
            coordinates: [28.650600, -81.315934],
            type: "Baseball",
            details: "The small field for little league practice."
          }
        },
        {
          name: "7-11 in Deer Run",
          properties: {
            coordinates: [28.653221, -81.309527],
            type: "Commercial",
            details: "This was the closest convenience store."
          }
        },
        {
          name: "Kyle's House",
          properties: {
            coordinates: [28.654393, -81.318275],
            type: "Residence",
            details: "Kyle was also part of the 'plays too much nintendo' club."
          }
        },
        {
          name: "High Voltage Substation",
          properties: {
            coordinates: [28.650235, -81.321234],
            type: "Danger",
            details: "No Tresspassing Signs and Razor-wire fences all around."
          }
        },
        {
          name: "Sinkholes",
          properties: {
            coordinates: [28.649962, -81.314955],
            type: "Danger",
            details: "Before the trail system..."
          }
        },
        {
          name: "Jason's House",
          properties: {
            coordinates: [28.649718, -81.320141],
            type: "Danger",
            details: "Bully who claimed to know karate."
          }
        },
        {
          name: "Tony Roma's Pizza",
          properties: {
            coordinates: [28.649852, -81.323039],
            type: "Restaurant",
            details: "Once the beloved neighborhood pizza place, this is now a Dollar General."
          }
        },
        {
          name: "Casselberry Elementary",
          properties: {
            coordinates: [28.660430, -81.317003],
            type: "School",
            details: "Home of the Fighting Pandas"
          }
        },
        {
          name: "The Woods",
          properties: {
            coordinates: [28.658428, -81.320880],
            type: "Danger",
            details: "Traditional location of juvenile deliquency"
          }
        },
        {
          name: "Sewer Entrance",
          properties: {
            coordinates: [28.656334, -81.320258],
            type: "Utility",
            details: "A culvert here allows easy access to storm sewers."
          }
        },
        {
          name: "South Seminole Middle School",
          properties: {
            coordinates: [28.660210, -81.319258],
            type: "School",
            details: "We all called it South Sewerhole."
          }
        },
        {
          name: "Semoran Skateway",
          properties: {
            coordinates: [28.642318, -81.323895],
            type: "Recreation",
            details: "Roller skating rink with sweet arcade games."
          }
        }
      ]
    };

      // add initial markers
      for (var i = 0; i < myLocations.features.length; i++){
        var props = myLocations.features[i].properties;
        var locationPopup =
          "<h2>" + myLocations.features[i].name + "</h2>" +
          "<p>" +
          props.details
          "</p>";
          var iconLocation = createIcon(props.type);
          L.marker(props.coordinates, {icon: iconLocation}).addTo(map).bindTooltip(locationPopup);
      };

      // createIcon function assigns iconURL based on type
      function createIcon(locationType) {
        var iconURL = "",
            iconSize = 40;

        if (props.type == "Animal") {
            iconURL = "svgs/veterinary-15.svg";
        } else if (props.type == "Baseball") {
            iconURL = "svgs/baseball-15.svg";
        } else if (props.type == "Residence") {
            iconURL = "svgs/home-15.svg";
        } else if (props.type == "Commercial") {
            iconURL = "svgs/commercial-15.svg";
        } else if (props.type == "Danger") {
            iconURL = "svgs/danger-15.svg";
        } else if (props.type == "Utility") {
            iconURL = "svgs/swimming-15.svg";
        } else if (props.type == "Recreation") {
            iconURL = "svgs/gaming-15.svg";
        } else if (props.type == "Restaurant") {
            iconURL = "svgs/restaurant-15.svg";
        } else {
            iconURL = "svgs/school-15.svg";
        }

        // return result, iconUrl is argument for L.icon, NOT iconURL
        var result = L.icon({
            iconUrl: iconURL,
            iconSize: iconSize,
            popupAnchor: [0, -15]
        });
        return result;
      };

      var myRoute = L.geoJson(routeData, {

          filter : function(feature) {
              if(feature.geometry.type == "LineString") {
                  return feature;
              }
          },
          style : function(feature) {

              return {
                  color: "#39B3C9",
                  weight: 5,
                  opacity: .8,
                  dashArray: "8, 8"
              }
          }

      }).addTo(map);

      var myStops = L.geoJson(routeData, {

          filter : function(feature) {
              if(feature.geometry.type == "Point") {
                  return feature;
              }
          },
          onEachFeature : function(feature, layer) {

              layer.bindTooltip(feature.properties.name);
          }

      }).addTo(map);

      myRoute.eachLayer(function(layer) {
          layer.on('mouseover', function(e) {
              e.target.setStyle({
                  color: '#DC2C98',
                  dashArray: "5, 5"
              });
          });
          layer.on('mouseout', function(e) {
              e.target.setStyle({
                  color: '#2CB3DC',
                  dashArray: "8, 8"
              });
          });
      });

      // // button code (challenge)
      // var button = document.getElementById("hidden-dangers");
      //
  		// button.addEventListener("click", function() {
  		// 	mapHidden();
  		// });
      //
      // // mapHidden function maps all secretLocation with special icon
  		// function mapHidden() {
      //   var dangerIcon = L.icon({
      //     iconUrl: "svgs/danger-15.svg",
      //     iconSize: 40,
      //   });
  		// 	for (var i = 0; i < secretLocation.length; i++) {
  		// 		var popup = "<h3>" + secretLocation[i] + "</h3><br>" + secretDetails[i];
  		// 		L.marker(secretCoords[i], {icon: dangerIcon}).addTo(map).bindTooltip(popup);
  		// 	}
      //
  		// }


      // show the modal
      // $('#show-lots').on("click", function () {
      //   $('.modal').fadeToggle();
      // });
      //
      // // hide the modal
      // $('.modal').click(function () {
      //   $('.modal').fadeToggle();
      // });
    </script>

</body>

</html>
